<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!-- favicon -  thanks to https://favicon.io/favicon-generator/ -->
		<link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
		<!-- JS and CSS -->
        <link rel="stylesheet" href="css/stylestests.css" />
		<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/controls/OrbitControls.min.js"></script>
        <title>My three.js tests</title>
	</head>
	<body>
		<p><a href="index.html">Back home</a></p>
		<div id="three-container"></div>
		FOV: <input type="range" id="fov-slider" min="0" max="100" value="75" step="1">
		Camera X: <input type="range" id="camera-x-slider" min="-10" max="10" value="0" step="0.1" autocomplete="off">
		Camera Y: <input type="range" id="camera-y-slider" min="-10" max="10" value="0" step="0.1" autocomplete="off">
		Camera Z: <input type="range" id="camera-z-slider" min="-10" max="10" value="5" step="0.1" autocomplete="off">
		<script>

            // Scene
			const scene = new THREE.Scene();
			scene.background = new THREE.Color('skyblue');

			// Camera
			const camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1000 );
			camera.position.x = 0;
			camera.position.y = 0;
			camera.position.z = 5;
			// camera.lookAt(0,0,0);

			// Renderer
			const renderer = new THREE.WebGLRenderer();
			renderer.setSize( window.innerWidth*.8, window.innerHeight*.8 );
			renderer.physicallyCorrectLights = true;
			document.querySelector('#three-container').appendChild( renderer.domElement );

			// Geometry
			const geometry = new THREE.BoxGeometry( 1, 1, 1 );
			const material = new THREE.MeshStandardMaterial( { color: 0x00ff00 } );
			const cube = new THREE.Mesh( geometry, material );
			scene.add(cube);
			
			// Light
			const light = new THREE.DirectionalLight('white', 8);
  			light.position.set(0, 5, 0);
			scene.add(light);

			// AxesHelper
			const axesHelper = new THREE.AxesHelper( 100 );
			scene.add(axesHelper);

			// OrbitControls
			const controls = new THREE.OrbitControls( camera, renderer.domElement );
			controls.addEventListener('change', () => {
				// update sliders when the camera is moved with the mouse (OrbitControls)
				document.querySelector('#fov-slider').value = camera.fov;
				document.querySelector('#camera-x-slider').value = camera.position.x;
				document.querySelector('#camera-y-slider').value = camera.position.y;
				document.querySelector('#camera-z-slider').value = camera.position.z;
			});

			// GLTFLoader
			const loader = new THREE.GLTFLoader();
			let model;
			loader.load( 'Nov 7, 2022.glb', function ( gltf ) {
				model = gltf.scene;
				scene.add( model );
			}, undefined, function ( error ) {
				console.error( error );
			} );


			function animate() {
				requestAnimationFrame( animate );

				cube.rotation.x += 0.01;
				cube.rotation.y += 0.01;
				// if(model) {
				// 	model.rotation.x += 0.01;
				// 	model.rotation.y += 0.01;
				// }

				renderer.render( scene, camera );
			};

			animate();


			// Sliders events
			document.querySelector('#fov-slider').addEventListener('input', function() {
				camera.fov = this.value;
				camera.updateProjectionMatrix();
				controls.update();
			});
			document.querySelector('#camera-x-slider').addEventListener('input', function() {
				camera.position.x = this.value;
				camera.updateProjectionMatrix();
				controls.update();
			});
			document.querySelector('#camera-y-slider').addEventListener('input', function() {
				camera.position.y = this.value;
				camera.updateProjectionMatrix();
				controls.update();
			});
			document.querySelector('#camera-z-slider').addEventListener('input', function() {
				camera.position.z = this.value;
				camera.updateProjectionMatrix();
				controls.update();
			});

		</script>
	</body>
</html>